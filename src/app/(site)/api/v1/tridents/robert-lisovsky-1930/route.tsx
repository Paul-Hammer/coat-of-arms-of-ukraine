import { NextRequest, NextResponse } from "next/server";
import { ImageResponse } from "next/og";
import { validateGetImageRequest } from "@/lib/utils";

export async function GET(req: NextRequest) {
  const validationResult = validateGetImageRequest(req);
  if (!validationResult.success) {
    return NextResponse.json(validationResult.errors);
  }
  const { fill, size } = validationResult.data;
  return new ImageResponse(
    (
      <svg
        width={249 * size}
        height={400 * size}
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M245.879 78.1879C245.621 80.8504 245.7 82.6188 245.263 84.2482C241.765 97.4616 242.163 110.874 242.819 124.326C244.408 157.27 244.349 190.174 241.408 223.059C239.619 243.207 237.672 263.375 237.195 283.563C236.718 303.89 239.977 323.879 247.469 342.993C247.985 344.325 248.244 345.775 248.939 348.299C246.078 347.762 244.011 347.544 242.044 346.967C221.496 340.947 200.531 339.536 179.347 341.821C176.048 342.179 172.531 345.159 170.047 347.782C164.84 353.266 159.554 358.214 151.585 358.969C150.035 359.108 148.445 359.128 146.16 359.247C147.949 353.107 146.518 346.669 154.506 343.967C160.846 341.821 162.972 336.436 160.985 329.859C159.634 325.428 157.368 321.176 154.904 317.242C153.215 314.54 152.877 313.089 155.341 310.566C160.071 305.698 165.019 303.433 172.173 304.188C182.149 305.241 190.753 301.306 197.053 293.279C202.498 286.364 203.372 278.615 199.438 270.826C195.344 262.739 188.726 257.791 179.267 258.209C174.617 258.407 170.007 259.52 164.999 260.275C164.125 251.811 161.78 243.724 168.357 236.213C172.55 231.444 172.908 224.986 171.795 218.886C169.371 205.534 166.211 192.3 163.986 178.908C161.064 161.303 162.038 144.235 172.193 128.558C179.168 117.808 188.587 109.98 199.696 104.158C207.923 99.846 216.786 96.7264 224.894 92.2557C231.392 88.6792 237.215 83.8309 243.355 79.5788C243.812 79.2608 244.329 79.0423 245.879 78.1879ZM219.051 120.213C218.515 119.954 217.978 119.696 217.422 119.418C215.474 120.292 213.388 120.968 211.579 122.08C192.681 133.645 184.394 150.514 186.878 172.53C187.773 180.438 189.303 188.287 190.276 196.175C191.985 210.064 192.979 223.854 185.229 236.63C184.096 238.518 184.315 241.22 183.977 243.088C190.197 243.465 195.821 242.949 200.908 244.34C205.975 245.73 210.526 249.029 216.389 252.049C214.779 207.322 214.381 163.728 219.051 120.213ZM224.258 325.826C222.35 312.414 220.582 299.935 218.634 286.225C217.462 288.093 216.985 288.649 216.707 289.305C209.91 305.777 198.484 316.566 180.301 319.169C175.968 319.785 176.267 322.905 176.485 326.859C192.502 322.488 208.32 323.779 224.258 325.826Z"
          fill={fill}
        />
        <path
          d="M95.168 313.05C92.4853 318.951 89.5243 324.097 87.7358 329.641C85.5499 336.417 88.0339 341.722 94.6116 344.464C98.6655 346.153 100.851 348.279 100.951 352.71C100.991 354.677 101.785 356.624 102.362 359.048C95.8437 359.485 90.4384 357.995 85.6294 354.518C83.8409 353.226 81.9927 351.796 80.7805 350.027C75.6138 342.457 68.3008 340.073 59.6166 340.768C44.9112 341.92 30.1859 343.033 15.5003 344.424C12.4797 344.702 9.57841 346.192 6.59757 347.007C4.68984 347.524 2.72249 347.822 0 348.358C0.53655 345.775 0.655783 344.027 1.25195 342.457C10.572 317.64 12.6387 291.789 11.1086 265.66C9.85662 244.141 6.35911 222.721 5.66358 201.202C4.7892 174.08 6.00141 146.878 5.82256 119.696C5.74307 108.39 4.39176 97.0841 3.577 85.7782C3.41802 83.6322 3.11994 81.5062 2.82185 78.9231C3.95457 79.2211 4.68984 79.1615 4.98793 79.5192C12.8772 88.2818 23.6479 92.1962 33.902 97.104C42.5464 101.237 51.4293 105.231 59.1993 110.715C78.4356 124.286 87.5967 143.5 85.5101 166.927C84.2383 181.273 80.8203 195.44 78.0382 209.607C75.8324 220.853 76.2099 231.086 82.7876 241.439C85.7287 246.068 84.2383 253.539 84.8146 260.514C80.2241 259.719 77.0644 259.163 73.9246 258.626C62.359 256.679 52.4428 261.944 48.3888 272.138C44.4939 281.914 48.21 292.762 57.689 299.24C63.3924 303.135 69.6918 304.704 76.5676 304.426C86.6428 303.989 89.1865 305.3 95.168 313.05ZM32.0936 250.897C32.5507 251.115 33.0077 251.334 33.4648 251.552C36.6642 249.804 39.963 248.174 43.0631 246.247C47.8324 243.306 52.9396 242.591 58.3846 243.287C64.9821 244.121 65.8963 242.889 63.4122 236.63C63.134 235.955 62.8558 235.239 62.4782 234.623C58.0865 227.589 56.4768 219.761 57.1525 211.693C58.1461 199.493 59.3186 187.273 61.3256 175.232C65.5783 149.878 53.8934 131.916 35.9687 121.464C34.4187 120.57 32.5706 120.213 29.4705 119.1C34.0014 163.728 33.8225 207.302 32.0936 250.897ZM71.6989 326.819C72.4143 320.759 71.6592 319.567 66.1745 318.653C50.1972 315.97 39.6053 306.671 33.0872 292.206C32.352 290.557 31.4577 288.987 30.643 287.378C30.2654 287.457 29.8679 287.537 29.4904 287.636C27.8211 300.174 26.132 312.692 24.3832 325.786C40.281 324.197 56.0794 322.09 71.6989 326.819Z"
          fill={fill}
        />
        <path
          d="M124.44 0C132.707 11.1072 140.497 21.1018 147.67 31.5335C149.32 33.9377 149.3 37.7925 149.24 40.9915C148.883 66.9813 148.684 92.9909 147.73 118.961C146.26 158.661 144.173 198.361 142.504 238.061C142.285 243.187 142.404 248.552 143.696 253.46C145.326 259.699 148.326 265.58 150.989 272.277C148.585 271.561 145.763 271.144 143.318 269.952C134.654 265.62 130.719 258.109 130.481 248.751C130.004 231.027 129.825 213.303 129.567 195.579C128.991 154.508 128.553 113.437 127.798 72.366C127.659 64.6565 126.308 56.9669 125.513 49.2574C124.957 49.2176 124.42 49.1779 123.864 49.1183C123.367 50.9463 122.532 52.7743 122.433 54.6222C121.38 72.1673 119.889 89.6925 119.611 107.257C119.015 144.772 119.094 182.306 118.836 219.84C118.776 229.596 118.737 239.352 118.16 249.069C117.624 258.328 113.689 265.898 104.945 270.111C102.66 271.204 99.997 271.502 96.6982 272.396C97.3739 270.747 97.513 269.992 97.9303 269.475C105.184 260.653 106.515 250.181 106.058 239.372C105.084 216.8 103.574 194.228 102.759 171.656C101.309 131.797 100.136 91.9179 98.9637 52.0391C98.6258 40.7531 99.0432 29.8246 108.025 20.8435C113.908 14.962 118.438 7.72937 124.44 0Z"
          fill={fill}
        />
        <path
          d="M156.434 287.755C155.758 292.643 152.698 292.842 149.22 292.802C132.25 292.683 115.279 292.663 98.3078 292.663C95.2873 292.663 92.4853 292.603 92.6045 287.656C90.657 288.729 88.9083 289.086 88.3717 290.08C84.9736 296.339 79.5882 294.312 74.799 293.2C71.7586 292.484 68.9367 290.477 66.2142 288.729C63.8097 287.179 63.6308 282.47 66.1148 281.178C70.2284 279.052 74.5804 277.165 79.0318 275.992C82.3504 275.118 85.848 275.257 88.014 279.37C89.107 281.437 91.5712 282.649 93.3398 279.052C93.8962 277.939 95.7244 276.787 96.9764 276.787C115.418 276.688 133.859 276.747 152.301 276.886C153.294 276.886 154.824 277.939 155.162 278.853C156.613 282.688 159.216 281.516 160.369 279.489C163.767 273.588 168.814 275.813 173.226 276.628C176.425 277.224 179.446 279.231 182.328 280.98C184.593 282.351 184.752 287.298 182.506 288.57C178.969 290.577 175.253 292.643 171.358 293.597C167.443 294.551 162.873 295.624 160.369 290.299C159.892 289.226 158.103 288.769 156.434 287.755Z"
          fill={fill}
        />
        <path
          d="M124.937 357.995C129.11 358.909 133.203 359.525 137.079 360.817C138.35 361.234 139.861 363.499 139.801 364.87C139.443 373.911 132.726 380.647 124.48 380.647C116.034 380.667 109.595 374.328 108.661 365.228C108.403 362.843 108.84 361.214 111.503 360.717C115.994 359.883 120.426 358.909 124.937 357.995Z"
          fill={fill}
        />
        <path
          d="M125.056 335.483C120.505 335.483 115.934 335.661 111.384 335.423C108.681 335.284 106.614 333.973 106.654 330.694C106.694 327.495 108.741 325.965 111.404 325.886C119.929 325.647 128.474 325.627 136.999 325.826C139.582 325.886 141.907 327.276 141.947 330.475C142.007 333.794 139.88 335.383 136.959 335.582C133.005 335.86 129.01 335.642 125.056 335.642C125.056 335.602 125.056 335.542 125.056 335.483Z"
          fill={fill}
        />
        <path
          d="M137.456 399.622C132.408 397.477 128.176 394.258 123.943 394.277C119.909 394.297 115.875 397.655 110.907 400C112.377 394.099 113.689 388.793 115.12 383.051C116.769 383.448 117.981 383.945 119.233 384.005C122.512 384.144 125.99 384.819 129.01 383.965C132.508 382.972 133.8 383.548 134.435 387.045C135.191 391.158 136.383 395.211 137.456 399.622Z"
          fill={fill}
        />
        <path
          d="M125.036 315.772C128.712 315.772 132.428 315.513 136.065 315.891C137.496 316.05 138.768 317.639 140.119 318.573C138.907 319.825 137.734 322.11 136.482 322.15C128.295 322.408 120.068 322.329 111.881 321.991C110.688 321.951 109.575 319.924 108.443 318.812C109.714 317.778 110.927 315.97 112.278 315.851C116.511 315.454 120.783 315.712 125.056 315.712C125.036 315.752 125.036 315.772 125.036 315.772Z"
          fill={fill}
        />
        <path
          d="M124.201 355.809C120.982 355.809 117.683 356.147 114.543 355.651C113.073 355.412 111.841 353.584 110.49 352.471C111.801 351.18 113.073 348.855 114.444 348.776C121.002 348.378 127.619 348.418 134.197 348.756C135.489 348.815 136.681 350.941 137.913 352.114C136.562 353.346 135.37 355.392 133.839 355.67C130.719 356.227 127.421 355.829 124.181 355.829C124.201 355.849 124.201 355.829 124.201 355.809Z"
          fill={fill}
        />
        <path
          d="M124.161 313.149C120.604 312.97 117.186 313.069 113.868 312.493C112.576 312.275 110.529 310.427 110.628 309.533C110.768 308.221 112.516 306.095 113.649 306.055C120.704 305.738 127.778 305.738 134.813 306.036C135.926 306.095 137.655 308.241 137.754 309.513C137.834 310.467 135.826 312.295 134.555 312.513C131.117 313.089 127.54 312.99 124.161 313.149Z"
          fill={fill}
        />
        <path
          d="M123.267 345.596C120.068 345.398 115.497 345.318 111.006 344.742C109.774 344.583 108.741 342.934 107.608 341.98C108.721 341.165 109.814 339.635 110.927 339.616C119.869 339.457 128.812 339.516 137.754 339.755C138.847 339.775 139.9 341.324 140.973 342.159C139.781 343.093 138.668 344.682 137.396 344.841C133.183 345.358 128.891 345.338 123.267 345.596Z"
          fill={fill}
        />
        <path
          d="M124.182 302.538C121.678 302.538 119.154 302.757 116.69 302.439C115.656 302.3 114.782 300.989 113.828 300.214C114.643 299.3 115.418 297.65 116.272 297.611C121.678 297.372 127.103 297.392 132.508 297.611C133.283 297.65 134.793 299.399 134.614 299.876C134.237 300.909 133.084 302.26 132.111 302.379C129.507 302.717 126.825 302.499 124.182 302.499C124.182 302.499 124.182 302.519 124.182 302.538Z"
          fill={fill}
        />
      </svg>
    ),
    {
      width: 249 * size,
      height: 400 * size,
    },
  );
}
