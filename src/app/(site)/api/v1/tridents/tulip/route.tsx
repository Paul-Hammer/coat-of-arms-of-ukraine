import { NextRequest } from "next/server";
import { ImageResponse } from "next/og";
import { extractAndModifyGetImageData } from "@/lib/utils";

export async function GET(req: NextRequest) {
  const { fill, size } = extractAndModifyGetImageData(req.url);

  return new ImageResponse(
    (
      <svg
        width={346 * size}
        height={400 * size}
        xmlns="http://www.w3.org/2000/svg"
      >
        <g clip-path="url(#clip0_306_4)">
          <path
            d="M343.808 68.6909C345.683 62.6858 346.824 56.7623 341.091 51.9801C335.358 47.1978 329.434 48.5564 323.375 51.3551C281.231 70.7016 253.814 103.716 235.473 145.398C222.92 173.874 218.953 204.008 217.431 234.576C216.697 249.276 216.697 264.031 215.583 278.704C215.42 280.715 216.154 283.35 213.871 284.41C211.589 285.47 209.334 283.54 207.866 281.693C201.888 274.356 196.101 266.857 190.177 259.466C186.509 254.901 188.302 250.798 190.531 246.315C202.886 221.525 211.214 194.925 215.203 167.516C220.357 131.13 217.132 94.0484 205.774 59.0991C200.563 41.9761 193.853 25.3458 185.721 9.4014C183.004 3.96698 179.091 0.543296 173.113 0.0541992H172.651H172.189C166.184 0.543296 162.408 3.93981 159.582 9.4014C151.455 25.3729 144.753 42.0307 139.556 59.1806C128.198 94.13 124.973 131.212 130.127 167.597C134.115 195.007 142.444 221.606 154.799 246.396C157.027 250.852 158.821 254.983 155.153 259.547C149.202 266.911 143.441 274.411 137.464 281.774C135.996 283.568 134.094 285.633 131.458 284.491C128.823 283.35 129.91 280.823 129.747 278.785C128.633 264.085 128.633 249.331 127.899 234.658C126.35 204.089 122.465 173.955 109.857 145.479C91.4885 103.797 64.0718 70.8103 21.9551 51.4366C15.8957 48.7194 9.94496 47.2521 4.23882 52.0616C-1.46731 56.871 -0.27174 62.7674 1.52162 68.7724C10.7088 97.111 17.3649 126.208 21.4116 155.723C23.7756 174.037 25.0799 192.351 22.3627 210.774C19.0749 233.136 13.9665 255.281 13.3144 277.943C12.7166 299.056 19.7542 317.179 36.9541 330.412C57.9853 346.715 81.2717 342.884 104.123 336.363C110.781 334.461 112.846 335.249 115.155 340.982C124.747 364.785 141.947 382.121 162.706 396.44C165.497 398.477 168.779 399.734 172.217 400.081H172.679H173.14C176.578 399.734 179.86 398.477 182.651 396.44C203.41 382.121 220.692 364.785 230.202 340.982C232.511 335.249 234.577 334.461 241.234 336.363C264.085 342.884 287.426 346.58 308.403 330.412C325.603 317.207 332.64 299.056 332.043 277.943C331.391 255.281 326.309 233.136 322.994 210.774C320.277 192.351 321.581 174.037 323.945 155.723C327.979 126.182 334.626 97.0568 343.808 68.6909ZM96.7326 312.18C89.6354 314.237 82.3555 315.602 74.995 316.256C48.6381 318.158 36.6551 296.665 38.2039 277.318C39.47 259.753 41.8296 242.283 45.2687 225.012C49.9152 202.731 49.2629 180.585 46.5186 158.359C44.0332 136.137 39.9837 114.118 34.3999 92.4664C34.3393 91.7183 34.4036 90.9653 34.5901 90.2383C37.5519 89.4503 39.2094 91.5154 40.8669 92.9555C63.005 111.429 79.7903 135.495 89.4777 162.652C98.4463 188.261 102.977 215.214 102.874 242.348C102.874 261.368 104.558 280.117 105.862 299.001C106.379 306.283 103.661 310.305 96.7054 312.18H96.7326ZM154.12 112.329C156.158 91.6513 162.027 72.1689 167.978 52.5507C168.929 49.453 170.369 46.4642 172.488 41.3015L172.706 40.8667L172.923 41.3015C175.042 46.4642 176.483 49.453 177.434 52.5507C183.384 72.1689 189.226 91.6513 191.291 112.329C194.96 149.365 188.574 184.58 175.667 219.007C175.097 220.583 174.744 222.729 172.706 222.865C170.668 223.001 170.342 220.583 169.744 219.007C156.973 184.58 150.452 149.365 154.12 112.329ZM209.198 324.923C203.981 343.944 191.02 357.095 176.781 369.431C176.271 370.01 175.644 370.473 174.942 370.79C174.239 371.107 173.477 371.271 172.706 371.271C171.935 371.271 171.172 371.107 170.47 370.79C169.767 370.473 169.14 370.01 168.63 369.431C154.392 357.068 141.458 343.89 136.214 324.923C135.58 323.497 135.412 321.908 135.734 320.381C136.056 318.854 136.852 317.467 138.007 316.419C149.639 305.81 160.414 294.298 170.233 281.992C170.352 281.431 170.66 280.928 171.105 280.568C171.55 280.207 172.106 280.01 172.679 280.01C173.252 280.01 173.807 280.207 174.252 280.568C174.697 280.928 175.005 281.431 175.124 281.992C184.961 294.291 195.755 305.793 207.404 316.391C208.566 317.442 209.365 318.834 209.687 320.366C210.009 321.899 209.838 323.494 209.198 324.923ZM310.876 92.4664C305.292 114.118 301.242 136.137 298.757 158.359C296.04 180.585 295.36 202.704 300.007 225.012C303.446 242.283 305.805 259.753 307.072 277.318C308.648 296.692 296.665 318.076 270.281 316.256C262.92 315.602 255.64 314.237 248.543 312.18C241.505 310.278 238.815 306.283 239.304 298.974C240.609 280.117 242.239 261.205 242.293 242.32C242.237 215.188 246.813 188.244 255.825 162.652C265.512 135.495 282.298 111.429 304.436 92.9555C306.093 91.5426 307.751 89.4775 310.713 90.2383C310.881 90.9684 310.927 91.7213 310.849 92.4664H310.876Z"
            fill={fill}
            stroke="black"
          />
        </g>
        <defs>
          <clipPath id="clip0_306_4">
            <rect width="345.33" height="400" fill={fill} />
          </clipPath>
        </defs>
      </svg>
    ),
    {
      width: 346 * size,
      height: 400 * size,
    },
  );
}
