import { NextRequest } from "next/server";
import { ImageResponse } from "next/og";
import { extractAndModifyGetImageData } from "@/lib/utils";

export async function GET(req: NextRequest) {
  const { fill, size } = extractAndModifyGetImageData(req.url);

  return new ImageResponse(
    (
      <svg
        width={250 * size}
        height={400 * size}
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M126.091 0C146.599 46.4071 163.397 95.4335 163.397 146.839H141.052C141.052 117.386 133.288 83.8549 125.626 59.239C117.039 87.0715 106.141 134.825 106.141 197.814C106.141 262.311 117.577 313.022 126.287 342.259C138.986 302.349 146.638 259.961 146.638 218.063H168.983C168.983 282.971 155.186 343.023 124.71 400C103.781 352.423 83.7962 278.374 83.7962 197.814C83.7962 127.618 95.9377 63.0528 126.096 0H126.091ZM22.3492 184.546H0V73.0108H22.3443C22.3443 93.5192 34.0991 109.088 45.8979 124.71C52.3065 133.195 58.7249 141.694 63.278 151.01C71.6595 168.141 77.461 187.983 74.6998 210.724C72.2666 230.748 63.322 251.981 45.4475 274.781C70.0195 296.156 78.2052 324.938 78.2052 356.325H0V324.204H22.3443V333.98H54.9356C50.5979 308.062 33.2717 292.043 12.0681 279.481C30.251 258.698 49.0606 236.496 52.517 208.032C56.2183 177.58 38.662 150.917 22.3443 126.938V184.546H22.3492ZM223.184 86.6651C226.459 79.8355 227.644 75.4244 227.644 72.8198H249.988C249.988 80.6923 246.894 88.9025 243.33 96.3294C238.209 107.002 232.06 117.136 225.916 127.271C216.78 142.335 207.645 157.39 201.902 174.197C193.971 197.398 198.348 253.528 227.639 264.911V197.119H249.983V356.325H182.955V333.98H227.644V288.131C180.762 278.085 167.739 205.065 180.762 166.966C186.73 149.517 196.1 133.934 205.476 118.331C211.708 107.967 217.945 97.5925 223.189 86.6651H223.184Z"
          fill={fill}
        />
      </svg>
    ),
    {
      width: 250 * size,
      height: 400 * size,
    },
  );
}
