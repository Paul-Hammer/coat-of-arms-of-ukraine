import { NextRequest } from "next/server";
import { ImageResponse } from "next/og";
import { extractAndModifyGetImageData } from "@/lib/utils";

export async function GET(req: NextRequest) {
  const { fill, size } = extractAndModifyGetImageData(req.url);

  return new ImageResponse(
    (
      <svg
        width={240 * size}
        height={400 * size}
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M224.825 39.6168C229.576 36.0559 234.595 32.8006 239.826 29.9226L239.851 319.681H173.022C168.028 346.82 153.087 370.474 132.099 386.714C127.105 390.163 122.919 394.702 119.921 400C116.906 394.702 112.737 390.163 107.742 386.714C86.7632 370.492 71.8306 346.829 66.8283 319.681H0V29.9142C5.22952 32.7826 10.2497 36.0476 14.9912 39.6085C42.5646 60.352 61.2949 92.2072 64.4874 128.542L74.2396 210.129L69.8689 209.664C60.5797 209.707 52.2497 216.278 50.3551 225.753C48.19 236.576 55.2234 247.104 66.0448 249.273L78.0636 251.694C82.1401 243.975 86.2333 236.281 90.0059 228.401C101.333 199.929 110.657 170.732 109.916 139.636C109.562 106.288 105.46 72.9901 104.913 39.6168C104.913 24.4231 110.589 10.5785 119.905 0C129.227 10.5785 134.904 24.4231 134.904 39.6168C134.348 72.9817 130.255 106.28 129.892 139.636C129.169 170.715 138.483 199.929 149.81 228.401C153.47 236.043 157.421 243.51 161.383 250.995L161.753 251.694L173.78 249.281C184.594 247.112 191.635 236.584 189.47 225.761C187.583 216.296 179.255 209.707 169.956 209.664L165.577 210.129L175.329 128.551C178.53 92.2072 197.243 60.352 224.825 39.6168Z"
          fill={fill}
        />
      </svg>
    ),
    {
      width: 240 * size,
      height: 400 * size,
    },
  );
}
